{"ast":null,"code":"import * as React from 'react';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { ArrowDown, ArrowRight, ArrowUp } from '@fluentui/keyboard-keys';\nimport { useArrowNavigationGroup, useFocusableGroup, useMergedTabsterAttributes_unstable, useFocusFinders } from '@fluentui/react-tabster';\nimport { isHTMLElement } from '@fluentui/react-utilities';\nimport { TabsterTypes, dispatchGroupperMoveFocusEvent, dispatchMoverMoveFocusEvent } from '@fluentui/react-tabster';\nexport function useTableCompositeNavigation() {\n  const horizontalAttr = useArrowNavigationGroup({\n    axis: 'horizontal'\n  });\n  const gridAttr = useArrowNavigationGroup({\n    axis: 'grid'\n  });\n  const groupperAttr = useFocusableGroup({\n    tabBehavior: 'limited-trap-focus'\n  });\n  const {\n    findFirstFocusable\n  } = useFocusFinders();\n  const {\n    targetDocument\n  } = useFluent();\n  const rowAttr = useMergedTabsterAttributes_unstable(horizontalAttr, groupperAttr);\n  const onKeyDown = React.useCallback(e => {\n    if (!targetDocument) {\n      return;\n    }\n    let activeElement = targetDocument.activeElement;\n    if (!activeElement || !e.currentTarget.contains(activeElement)) {\n      return;\n    }\n    const activeElementRole = activeElement.getAttribute('role');\n    // Enter groupper when in row focus mode to navigate cells\n    if (e.key === ArrowRight && activeElementRole === 'row' && isHTMLElement(activeElement)) {\n      var _findFirstFocusable;\n      (_findFirstFocusable = findFirstFocusable(activeElement)) === null || _findFirstFocusable === void 0 ? void 0 : _findFirstFocusable.focus();\n    }\n    if (activeElementRole === 'row') {\n      return;\n    }\n    const isInCell = (() => {\n      let cur = isHTMLElement(activeElement) ? activeElement : null;\n      while (cur) {\n        const curRole = cur.getAttribute('role');\n        if (curRole === 'cell' || curRole === 'gridcell') {\n          return true;\n        }\n        cur = cur.parentElement;\n      }\n      return false;\n    })();\n    // Escape groupper focus trap before arrow down\n    if ((e.key === ArrowDown || e.key === ArrowUp) && isInCell) {\n      dispatchGroupperMoveFocusEvent(activeElement, TabsterTypes.GroupperMoveFocusActions.Escape);\n      activeElement = targetDocument.activeElement;\n      if (activeElement) {\n        dispatchMoverMoveFocusEvent(activeElement, TabsterTypes.MoverKeys[e.key]);\n      }\n    }\n  }, [targetDocument, findFirstFocusable]);\n  return {\n    onTableKeyDown: onKeyDown,\n    tableTabsterAttribute: gridAttr,\n    tableRowTabsterAttribute: rowAttr\n  };\n}","map":{"version":3,"names":["React","useFluent_unstable","useFluent","ArrowDown","ArrowRight","ArrowUp","useArrowNavigationGroup","useFocusableGroup","useMergedTabsterAttributes_unstable","useFocusFinders","isHTMLElement","TabsterTypes","dispatchGroupperMoveFocusEvent","dispatchMoverMoveFocusEvent","useTableCompositeNavigation","horizontalAttr","axis","gridAttr","groupperAttr","tabBehavior","findFirstFocusable","targetDocument","rowAttr","onKeyDown","useCallback","e","activeElement","currentTarget","contains","activeElementRole","getAttribute","key","_findFirstFocusable","focus","isInCell","cur","curRole","parentElement","GroupperMoveFocusActions","Escape","MoverKeys","onTableKeyDown","tableTabsterAttribute","tableRowTabsterAttribute"],"sources":["D:/shubh/invezza-hrm/node_modules/@fluentui/react-table/lib/hooks/useTableCompositeNavigation.js"],"sourcesContent":["import * as React from 'react';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { ArrowDown, ArrowRight, ArrowUp } from '@fluentui/keyboard-keys';\nimport { useArrowNavigationGroup, useFocusableGroup, useMergedTabsterAttributes_unstable, useFocusFinders } from '@fluentui/react-tabster';\nimport { isHTMLElement } from '@fluentui/react-utilities';\nimport { TabsterTypes, dispatchGroupperMoveFocusEvent, dispatchMoverMoveFocusEvent } from '@fluentui/react-tabster';\nexport function useTableCompositeNavigation() {\n    const horizontalAttr = useArrowNavigationGroup({\n        axis: 'horizontal'\n    });\n    const gridAttr = useArrowNavigationGroup({\n        axis: 'grid'\n    });\n    const groupperAttr = useFocusableGroup({\n        tabBehavior: 'limited-trap-focus'\n    });\n    const { findFirstFocusable } = useFocusFinders();\n    const { targetDocument } = useFluent();\n    const rowAttr = useMergedTabsterAttributes_unstable(horizontalAttr, groupperAttr);\n    const onKeyDown = React.useCallback((e)=>{\n        if (!targetDocument) {\n            return;\n        }\n        let activeElement = targetDocument.activeElement;\n        if (!activeElement || !e.currentTarget.contains(activeElement)) {\n            return;\n        }\n        const activeElementRole = activeElement.getAttribute('role');\n        // Enter groupper when in row focus mode to navigate cells\n        if (e.key === ArrowRight && activeElementRole === 'row' && isHTMLElement(activeElement)) {\n            var _findFirstFocusable;\n            (_findFirstFocusable = findFirstFocusable(activeElement)) === null || _findFirstFocusable === void 0 ? void 0 : _findFirstFocusable.focus();\n        }\n        if (activeElementRole === 'row') {\n            return;\n        }\n        const isInCell = (()=>{\n            let cur = isHTMLElement(activeElement) ? activeElement : null;\n            while(cur){\n                const curRole = cur.getAttribute('role');\n                if (curRole === 'cell' || curRole === 'gridcell') {\n                    return true;\n                }\n                cur = cur.parentElement;\n            }\n            return false;\n        })();\n        // Escape groupper focus trap before arrow down\n        if ((e.key === ArrowDown || e.key === ArrowUp) && isInCell) {\n            dispatchGroupperMoveFocusEvent(activeElement, TabsterTypes.GroupperMoveFocusActions.Escape);\n            activeElement = targetDocument.activeElement;\n            if (activeElement) {\n                dispatchMoverMoveFocusEvent(activeElement, TabsterTypes.MoverKeys[e.key]);\n            }\n        }\n    }, [\n        targetDocument,\n        findFirstFocusable\n    ]);\n    return {\n        onTableKeyDown: onKeyDown,\n        tableTabsterAttribute: gridAttr,\n        tableRowTabsterAttribute: rowAttr\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}